<div class="billing">
    <!-- ===== Bill Status ==== -->
    <div fxLayout="row wrap" class="p-t-20">
        <div fxFlex="80" fxFlex.sm="100" fxFlex.xs="100">
            <div class="main-title p-l-0">Bill Status</div>
            <p class="description p-l-0">View the Billâ€™s progress here, from beginning to end.</p>
            <mat-progress-bar mode="determinate" value="50" class="not-sent p-l-0 m-b-20">
            </mat-progress-bar>
            <div class="text-center">Not Sent</div>
        </div>
        <div fxFlex="20" fxFlex.sm="100" fxFlex.xs="100" class="review-status">
            <div>First Bill Review</div>
        </div>
    </div>
    <div fxLayout="row wrap" class="p-t-20">
        <div fxFlex="50">
            <div class="bill-id"><span>Bill:</span> #50504949</div>
        </div>
        <div fxFlex="50">
            <div class="submission-date"><span>First Bill Review Submission Date:</span> 10-13-2020</div>
        </div>
    </div>

    <div class="border-dashed-blue"></div>

    <!-- ===== Examiner information ==== -->
    <div class="examiner-info">
        <mat-card>
            <mat-card-header>
                <div class="content-wrapper-main-title">Examiner Information</div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
                <div fxLayout="row wrap" class="p-t-20">
                    <div class="grid-list" fxFlex="33.3" fxFlex.xs="100">
                        <div>Billing Provider</div>
                        <div> Gupta Medical Group LLC</div>
                    </div>
                    <div class="grid-list" fxFlex="33.3" fxFlex.xs="100">
                        <div>Rendering Provider</div>
                        <div> Amir Gupta M.D.</div>
                    </div>
                    <div class="grid-list" fxFlex="33.3" fxFlex.xs="100">
                        <div>Service Location </div>
                        <div>123 Dr. Careon Ave. Indo, California 98507</div>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>

    <!-- ===== Diagnosis Codes ==== -->
    <div class="diagnosis-info">
        <mat-card>
            <mat-card-header>
                <div class="content-wrapper-main-title p-l-10">Diagnosis Codes</div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
                <div fxLayout="row wrap" class="m-t-10">
                    <div class="table-filter m-b-10">
                        <input [formControl]="icdCtrl" [matAutocomplete]="auto" placeholder="Search by code or name">
                        <mat-autocomplete #auto="matAutocomplete">
                            <mat-option (click)="selectICD(icd)" *ngFor="let icd of filteredICD" [value]="icd[1]">
                                {{icd[0] + " "+ icd[1]}}
                            </mat-option>
                        </mat-autocomplete>
                        <mat-icon>search</mat-icon>
                    </div>
                    <span class="spacer"></span>
                    <button mat-raised-button (click)="addIcd()" class="filled-gray">
                        Add
                    </button>
                </div>
                <div fxLayout="row wrap">
                    <div class="user-detail vertical-fixed">
                        <table mat-table [dataSource]="IcdDataSource" multiTemplateDataRows
                            class="mat-elevation-z8 user-table" matSort>
                            <ng-container matColumnDef="{{column}}"
                                *ngFor="let column of columnsToDisplay; let i=index">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    [disabled]="columnName[i] == 'Action'">
                                    {{columnName[i]}} </th>
                                <td mat-cell *matCellDef="let element; let ii=index">
                                    <span *ngIf="i == 0 && isMobile">
                                        <mat-icon mat-raised-button
                                            [ngClass]="{'table-expand': icdExpandID == element.code, 'expand-close': !(icdExpandID == element.code)}">
                                            {{ icdExpandID == element.code ? 'remove_circle' : 'add_circle'}}
                                        </mat-icon>
                                    </span>
                                    <div>
                                        <span *ngIf="column == 'code'">{{element?.code}}</span>
                                        <span *ngIf="column == 'name'">{{element?.name}}</span>
                                        <span *ngIf="column == 'action'">
                                            <a class="text-danger" (click)="removeICD(element)">Remove</a>
                                        </span>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="expandedDetail">
                                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                                    <div class="detail"
                                        [@detailExpand]="icdExpandID == element.code ? 'expanded' : 'collapsed'">
                                        <div class="resposive-table">
                                            <div><span>Code</span> {{element?.code}} </div>
                                            <div><span>Name</span> {{element?.name}} </div>

                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnsToDisplay;sticky :true"></tr>
                            <tr mat-row *matRowDef="let element; columns: columnsToDisplay;" class="row"
                                [class.row]="expandedElement === element" (click)="openElement(element)">
                            </tr>
                            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
                        </table>
                        <app-nodata *ngIf="IcdDataSource?.filteredData?.length == 0"></app-nodata>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
    <!-- ===== Bill Items ==== -->
    <div class="bill-item">
        <mat-card>
            <mat-card-header>
                <div class="content-wrapper-main-title p-l-10">Bill Items</div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
                <div fxLayout="row wrap" class="m-t-10">
                    <div class="table-filter m-b-10">
                        <input (keyup)="applyFilter($event.target.value)" [(ngModel)]="filterValue"
                            placeholder="Search by code or name">
                        <mat-icon>search</mat-icon>
                    </div>
                    <span class="spacer"></span>
                    <button mat-raised-button class="filled-gray">
                        Add Bill Item
                    </button>
                </div>
                <div fxLayout="row wrap">
                    <div class="user-detail vertical-fixed">
                        <table mat-table [dataSource]="dataSource1" multiTemplateDataRows
                            class="mat-elevation-z8 user-table" matSort>
                            <ng-container matColumnDef="{{column}}"
                                *ngFor="let column of columnsToDisplay1; let i=index">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    [disabled]="columnName1[i] == 'Action'">
                                    {{columnName1[i]}} </th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="i == 0 && isMobile1">
                                        <mat-icon mat-raised-button
                                            [ngClass]="{'table-expand': expandId1 == element.id, 'expand-close': !(expandId1 == element.id)}">
                                            {{ expandId1 == element.id ? 'remove_circle' : 'add_circle'}}
                                        </mat-icon>
                                    </span>
                                    <div>
                                        <span *ngIf="column == 'item'"><input type="text" value="{{element?.item}}"
                                                class="custom-input"></span>
                                        <span *ngIf="column == 'procedure_code'"><input type="text"
                                                value="{{element?.procedure_code}}" class="custom-input"></span>
                                        <span *ngIf="column == 'modifier'"><input type="text"
                                                value="{{element?.modifier}}" class="custom-input"></span>
                                        <span *ngIf="column == 'units'"><input type="text" value="{{element?.units}}"
                                                class="custom-input"></span>
                                        <span *ngIf="column == 'charge'"><input type="text" value="{{element?.charge}}"
                                                class="custom-input"></span>
                                        <span *ngIf="column == 'payment'">{{element?.payment}}</span>
                                        <span *ngIf="column == 'balance'" class="text-danger">{{element?.balance}}</span>
                                        <span *ngIf="column == 'action'">
                                            <a class="text-success m-r-10">Edit</a>
                                            <a class="text-danger">Remove</a>
                                        </span>
                                    </div>
                                </td>
                                <td mat-footer-cell *matFooterCellDef>
                                    <div>
                                        <span *ngIf="column == 'item'"><b>Total</b></span>
                                        <span *ngIf="column == 'procedure_code'"></span>
                                        <span *ngIf="column == 'modifier'"></span>
                                        <span *ngIf="column == 'units'"></span>
                                        <span *ngIf="column == 'charge'"><b>6600.00</b></span>
                                        <span *ngIf="column == 'payment'">0</span>
                                        <span *ngIf="column == 'balance'"  class="text-danger"><b>6600.00</b></span>
                                        <span *ngIf="column == 'action'"></span>
                                    </div>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="expandedDetail">
                                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay1.length">
                                    <div class="detail"
                                        [@detailExpand]="expandId1 == element.id ? 'expanded' : 'collapsed'">
                                        <div class="resposive-table">
                                            <div><span>Item</span> {{element?.item}} </div>
                                            <div><span>Procedure Code</span> {{element?.procedure_code}} </div>
                                            <div><span>Modifier</span> {{element?.modifier}} </div>
                                            <div><span>Units</span> {{element?.units}} </div>
                                            <div><span>Charge</span> {{element?.charge}} </div>
                                            <div><span>Payment</span> {{element?.payment}} </div>
                                            <div><span>Balance</span> {{element?.balance}} </div>

                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnsToDisplay1;sticky :true"></tr>
                            <tr mat-row *matRowDef="let element; columns: columnsToDisplay1;" class="row"
                                [class.row]="expandedElement === element" (click)="openElement(element)">
                            </tr>

                            <tr mat-footer-row *matFooterRowDef="columnsToDisplay1; sticky: true"></tr>
                            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
                        </table>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
    <!-- ===== Bill Items ==== -->
    <div fxlayout="row wrap" class="m-t-20 post-payment">
        <div fxFlex="100">
            <button mat-stroked-button class="outline-secondary huge-btn" (click)="openDialog()">Post Payment</button>
        </div>
    </div>
    <!-- ===== Documents ==== -->
    <div class="documents">
        <mat-card>
            <mat-card-header>
                <div class="content-wrapper-main-title p-l-10">Documents</div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content>
                <div class="w-100">
                    <div fxLayout="row wrap" fxFlex="100" class="document-file-upload w-100 m-t-20">
                        <mat-form-field fxFlex="100" fxFlex.sm="100" fxFlex.md="30" fxFlex.lg="30" fxFlex.xl="30"
                            appearance="outline" class="m-t-10">
                            <mat-label>Document Type</mat-label>
                            <mat-select>
                                <mat-option>
                                    option here...
                                </mat-option>
                            </mat-select>
                            <!-- <mat-hint>
                                <mat-error>
                                    error message here
                                </mat-error>
                            </mat-hint> -->
                        </mat-form-field>
                        <div fxFlex="100" fxFlex.sm="100" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50" class="Upload_">
                            <button type="button" mat-stroked-button class="filled-gray">Select File
                            </button>
                            <mat-form-field appearance="standard">
                                <input matInput [(ngModel)]="file" readonly placeholder="No file chosen">
                                <input type="file" #uploader hidden (change)="addFile($event)" hidden
                                    accept=".pdf, .doc, .docx, .xls, .xlsx, .csv" required>
                                <mat-hint>Supported file formats: .pdf, .doc, .docx, .excel, .csv</mat-hint>
                                <!-- <mat-hint>
                                    <mat-error>error message here</mat-error>
                                </mat-hint> -->
                            </mat-form-field>
                        </div>

                        <div fxFlex="100" fxFlex.sm="100" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50" class="Upload_"
                            *ngIf="documentType == 7">
                            <button mat-raised-button class="filled-gray">Select File</button>
                            <mat-form-field appearance="standard" class="p-l-10 w-100">
                                <input matInput value="{{file | ellipsis:30}}" readonly placeholder="No file chosen">
                                <input type="file" #uploader hidden (change)="addFile($event)" multiple
                                    accept=".mp3, .wav, .m4a, .wma, .dss, .ds2, .dct" required>
                                <mat-hint>Supported file formats: .mp3, .wav, .m4a, .wma, .dss, .ds2, .dct</mat-hint>
                                <!-- <mat-hint>
                                    <mat-error>error message here</mat-error>
                                </mat-hint> -->
                            </mat-form-field>
                        </div>


                        <div fxFlex="100" fxFlex.sm="100" fxFlex.md="20" fxFlex.lg="20" fxFlex.xl="20">
                            <button mat-stroked-button type="button" class="filled-gray p-r-20 m-t-20">Add
                            </button>
                        </div>
                    </div>
                </div>
                <div fxLayout="row" class="w-100">
                    <div class="user-detail vertical-fixed" fxFlex="100">
                        <table mat-table [dataSource]="dataSource2" multiTemplateDataRows
                            class="mat-elevation-z8 user-table" matSort>
                            <ng-container matColumnDef="{{column}}"
                                *ngFor="let column of columnsToDisplay2; let i=index">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    [disabled]="columnName2[i] == 'Action'">
                                    {{columnName2[i]}} </th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="i == 0 && isMobile2">
                                        <mat-icon mat-raised-button
                                            [ngClass]="{'table-expand': expandId2 == element.id, 'expand-close': !(expandId2 == element.id)}">
                                            {{ expandId2 == element.id ? 'remove_circle' : 'add_circle'}}
                                        </mat-icon>
                                    </span>
                                    <div>
                                        <span *ngIf="column == 'file_name'">{{element?.file_name}}</span>
                                        <span *ngIf="column == 'type'">{{element?.type}}</span>
                                        <span *ngIf="column == 'date'">{{element?.date}}</span>
                                        <span *ngIf="column == 'action'">
                                            <a class="text-success m-r-10">Download</a>
                                            <a class="text-danger">Remove</a>
                                        </span>
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="expandedDetail">
                                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay2.length">
                                    <div class="detail"
                                        [@detailExpand]="expandId2 == element.id ? 'expanded' : 'collapsed'">
                                        <div class="resposive-table">
                                            <div><span>File Name</span> {{element?.file_name}} </div>
                                            <div><span>Type</span> {{element?.type}} </div>
                                            <div><span>Date</span> {{element?.date}} </div>

                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnsToDisplay2;sticky :true"></tr>
                            <tr mat-row *matRowDef="let element; columns: columnsToDisplay2;" class="row"
                                [class.row]="expandedElement === element" (click)="openElement(element)">
                            </tr>
                            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
                        </table>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>


    <div class="border-dashed-blue m-b-20 m-t-30"></div>

    <!-- ===== actions ==== -->
    <div class="ondamand-actions m-t-30 m-b-30" fxLayout="row wrap">
        <div fxFlex="33.3" class="align-left">
            <button mat-stroked-button class="outline-success huge-btn">Bill On Demand</button>
        </div>
        <div fxFlex="33.3" class="align-center">
            <button mat-stroked-button class="filled-lightgray huge-btn">View CMS 1500</button>
        </div>
        <div fxFlex="33.3" class="align-right">
            <button mat-stroked-button class="outline-warning huge-btn">Download All</button>
        </div>
    </div>

    <div class="border-dashed-blue m-b-20 m-t-20"></div>

    <!-- ===== Completed Documents ==== -->
    <div class="completed-documents m-t-30">
        <mat-card>
            <mat-card-content>
                <div fxLayout="row wrap" class="w-100">
                    <div fxFlex="100">
                        <div class="main-title">Completed Documents</div>
                        <p class="description">This table lists the documents, actions that were performed on the
                            documents, the date that the actions were performed and the document recipients.</p>
                    </div>
                    <div class="user-detail vertical-fixed" fxFlex="100">
                        <table mat-table [dataSource]="dataSource3" multiTemplateDataRows
                            class="mat-elevation-z8 user-table" matSort>
                            <ng-container matColumnDef="{{column}}"
                                *ngFor="let column of columnsToDisplay3; let i=index">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                    [disabled]="columnName3[i] == 'Action'">
                                    {{columnName3[i]}} </th>
                                <td mat-cell *matCellDef="let element">
                                    <span *ngIf="i == 0 && isMobile3">
                                        <mat-icon mat-raised-button
                                            [ngClass]="{'table-expand': expandId3 == element.id, 'expand-close': !(expandId3 == element.id)}">
                                            {{ expandId3 == element.id ? 'remove_circle' : 'add_circle'}}
                                        </mat-icon>
                                    </span>
                                    <div>
                                        <span *ngIf="column == 'file_name'">{{element?.file_name}}</span>
                                        <span *ngIf="column == 'action'">{{element?.action}}</span>
                                        <span *ngIf="column == 'date'" class="no-wrap-td">{{element?.date}}</span>
                                        <span *ngIf="column == 'recipients'">{{element?.recipients}}</span>
                                        <span *ngIf="column == 'sent_document'">
                                            <a class="text-success m-r-10">Download</a>
                                        </span>
                                        <span *ngIf="column == 'proof_of_service'">
                                            <a class="text-success m-r-10">Download</a>
                                        </span>
                                        <!-- <span *ngIf="column == 'action'">
                                            <a class="text-success m-r-10">Edit</a>
                                            <a class="text-danger">Remove</a>
                                        </span> -->
                                    </div>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="expandedDetail">
                                <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay3.length">
                                    <div class="detail"
                                        [@detailExpand]="expandId3 == element.id ? 'expanded' : 'collapsed'">
                                        <div class="resposive-table">
                                            <div><span>File Name</span> {{element?.file_name}} </div>
                                            <div><span>Action</span> {{element?.action}} </div>
                                            <div><span>Date</span> {{element?.date}} </div>
                                            <div><span>Recipients</span>{{element?.recipients}} </div>
                                            <div><span>Download
                                                    Sent Documents</span> <a class="text-success m-r-10">Download</a>
                                            </div>
                                            <div><span>Download
                                                    Proof of Service</span> <a class="text-success m-r-10">Download</a>
                                            </div>

                                        </div>
                                    </div>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="columnsToDisplay3;sticky :true"></tr>
                            <tr mat-row *matRowDef="let element; columns: columnsToDisplay3;" class="row"
                                [class.row]="expandedElement === element" (click)="openElement(element)">
                            </tr>
                            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
                        </table>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>