<mat-card class="m-b-20" *ngIf="!isLoading">
    <mat-card-header>
        <mat-panel-title>
            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Claimant & Claim</div>
        </mat-panel-title>
    </mat-card-header>
    <mat-divider> </mat-divider>
    <mat-card-content class="m-t-15">
        <div fxLayout="row wrap" fxFlex="100">
            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Name </mat-label>
                <input matInput type="text" placeholder="Name" [value]="claimantDetails.claimant_name" disabled>
            </mat-form-field>
            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Date of Birth</mat-label>
                <input matInput name="date_of_birth" placeholder="Date of Birth"
                    [ngModel]="claimantDetails.date_of_birth | date:'MM-dd-yyyy'"
                    (ngModelChange)="claimantDetails.date_of_birth = $event" disabled>
                <mat-error>Please enter valid claim number</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Phone</mat-label>
                <input type="text" matInput placeholder="Enter Phone"
                    [value]="claimantDetails.phone_no_1| mask:'(000) 000-0000'" mask="(000) 000-0000" disabled>
            </mat-form-field>
            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Claim Number</mat-label>
                <input matInput placeholder="Claim Number" [value]="claimDetails.claim_number" autocomplete="off"
                    disabled>
                <mat-error>Please enter valid claim number</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>WCAB Number</mat-label>
                <input type="text" matInput placeholder="Enter WCAB Number" autocomplete="off"
                    [value]="claimDetails.wcab_number" disabled>
                <mat-error>Please enter valid WCAB number</mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3"
                fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Exam Type*</mat-label>
                <input type="text" matInput placeholder="Enter WCAB Number" autocomplete="off"
                    value="{{claimDetails?.exam_type_code}} - {{claimDetails?.exam_name}}" disabled>
                <mat-error>Please select exam type</mat-error>
            </mat-form-field>

        </div>
    </mat-card-content>
</mat-card>
<mat-card class="m-card" *ngIf="!isLoading">
    <mat-card-header>
        <div class="m-0 sub-title">Billable Item and Intake Call Information</div>
    </mat-card-header>
    <mat-divider></mat-divider>

    <mat-card-content>
        <form fxLayout="row wrap" fxFlex="100" [formGroup]="billable_item"
            (keydown.enter)="$event.target.tagName == 'TEXTAREA'">
            <div fxLayout="row wrap" fxFlex="100" class="p-t-15">
                <div fxLayout="row wrap" fxFlex="100" formGroupName="exam_type">
                    <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                        <mat-label>Exam Procedure Type*</mat-label>
                        <mat-select formControlName="exam_procedure_type_id">
                            <mat-option *ngFor="let procuderalCode of procuderalCodes"
                                [value]="procuderalCode.exam_procedure_type_id"
                                (click)="procedure_type(procuderalCode)">
                                {{procuderalCode.exam_procedure_name}}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="isBillSubmited">Please select Exam Procedure Type</mat-error>
                    </mat-form-field>

                    <!-- <div fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <div fxLayout="row wrap">
                            <mat-form-field appearance="outline" fxFlex="100">
                                <mat-label>Modifiers</mat-label>
                                <mat-select formControlName="modifier_id" multiple (selectionChange)="modifyChange()">
                                    <mat-option *ngFor="let modifier of modifiers" [value]="modifier.id">
                                        {{modifier.modifier_code}} - {{modifier.modifier}}
                                    </mat-option>
                                </mat-select>
                                <mat-hint *ngIf="billable_item.value.exam_type?.modifier_id?.includes(2)">
                                    <span *ngIf="!primary_language_spoken">Note: No language selected.
                                        Please
                                        select
                                        it from Claimant's section!</span>

                                </mat-hint>
                            </mat-form-field>
                            <div fxFlex="100" *ngIf="billable_item.value.exam_type?.modifier_id?.includes(2)">
                                <div class="selected_lang" *ngIf="primary_language_spoken">
                                    {{selectedLanguage?.language}}</div>
                            </div>
                        </div>

                    </div> -->
                </div>
                <div fxLayout="row wrap" fxFlex="100" formGroupName="appointment">

                    <!-- <div fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-checkbox class="mat-check m-b-20" [(ngModel)]="isChecked"
                            [ngModelOptions]="{standalone: true}" (change)="psychiatric($event)" labelPosition="after">
                            Psych
                        </mat-checkbox>
                    </div> -->
                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Examiner</mat-label>
                        <mat-select formControlName="examiner_id">
                            <mat-option *ngFor="let examinar of examinarList" (click)="examinarChange(examinar)"
                                [value]="examinar.id">
                                {{examinar.first_name}} {{examinar.middle_name}} {{examinar.last_name}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="25" fxFlex.md="25" fxFlex.sm="25" fxFlex.xs="100" *ngIf="!isSuplimental">
                        <mat-label>Date & Time</mat-label>
                        <input matInput placeholder="MM-DD-YYYY HH:MM AM/PM" [min]="todayDate.appointment"
                            formControlName="appointment_scheduled_date_time" autocomplete="off"
                            [owlDateTime]="appointment" [value]="changeDateType(billable_item?.value?.appointment?.appointment_scheduled_date_time)">
                        <mat-datepicker-toggle matSuffix [owlDateTimeTrigger]="appointment">
                        </mat-datepicker-toggle>
                        <owl-date-time (afterPickerOpen)="pickerOpened('app')" [hour12Timer]="true" #appointment>
                        </owl-date-time>
                        <mat-error>Please enter valid date & time</mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="25" fxFlex.md="25" fxFlex.sm="25" fxFlex.xs="100" *ngIf="!isSuplimental">
                        <mat-label>Duration</mat-label>
                        <input matInput placeholder="Minutes" maxlength="3" formControlName="duration"
                            autocomplete="off">
                        <span matSuffix>Minutes</span>
                        <mat-error>Please enter valid duration</mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100" *ngIf="!isSuplimental">
                        <mat-label>Location</mat-label>
                        <mat-select>
                            <mat-option *ngFor="let address of (examinarAddress | async)"
                                (click)="changeExaminarAddress(address)" [value]="address.street1">
                                {{address.street1}} {{address.street2}} {{address.city}}
                                {{address.state_name}}
                                {{address.zip_code+(address.zip_code_plus_4 != null ? "-"+address.zip_code_plus_4 : "")}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxLayout="row wrap" fxFlex="100" formGroupName="intake_call">
                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Intake Caller</mat-label>
                        <input matInput placeholder="Intake Caller" formControlName="caller_name" autocomplete="off">
                    </mat-form-field>
                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Caller Affiliation</mat-label>
                        <mat-select formControlName="caller_affiliation">
                            <mat-option *ngFor="let caller of callerAffliation" [value]="caller.id">
                                {{caller.agent_type_name}}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Intake Call Date & Time</mat-label>
                        <input matInput placeholder="MM-DD-YYYY HH:MM AM/PM" formControlName="call_date"
                            autocomplete="off" [min]="minDate" [max]="todayDate.intake" [owlDateTime]="intake" [value]="changeDateType(billable_item?.value?.intake_call?.call_date)">
                        <mat-datepicker-toggle matSuffix [owlDateTimeTrigger]="intake">
                        </mat-datepicker-toggle>
                        <owl-date-time (afterPickerOpen)="pickerOpened('intake')" [hour12Timer]="true" #intake>
                        </owl-date-time>
                        <mat-error>Please enter valid date & time</mat-error>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Communication Type</mat-label>
                        <mat-select formControlName="call_type">
                            <mat-option *ngFor="let contactType of contactTypes" [value]="contactType.id">
                                {{contactType.display_name}}</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                    fxFlex.xs="100">
                    <mat-label>Caller Phone</mat-label>
                    <input matInput placeholder="Caller Phone" formControlName="caller_phone"
                        (keypress)="numberOnly($event)" mask="(000) 000-0000" autocomplete="off">
                    <mat-error *ngIf="isBillSubmited">Please enter valid phone</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                    fxFlex.xs="100">
                    <mat-label>Caller Fax</mat-label>
                    <input matInput placeholder="Caller Fax" formControlName="caller_fax"
                        autocomplete="off" (keypress)="numberOnly($event)" mask="(000) 000-0000">
                    <mat-error *ngIf="isBillSubmited">Please enter valid fax</mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                    fxFlex.xs="100">
                    <mat-label>Caller Email</mat-label>
                    <input matInput placeholder="Caller Email" formControlName="caller_email"
                        autocomplete="off">
                    <mat-error *ngIf="isBillSubmited">Please enter valid email</mat-error>
                </mat-form-field>
                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                        <mat-label>Intake Call Notes</mat-label>
                        <input matInput placeholder="Intake Call Notes" formControlName="notes" autocomplete="off">
                    </mat-form-field>
                </div>
                <div class="text-center w-100 m-t-10 m-b-10 action-button">
                    <button mat-stroked-button type="button" class="m-r-10 outline-danger"
                        (click)="cancel()">Cancel</button>
                    <button mat-stroked-button class="m-r-10 outline-success" (click)="submitBillableItem()">
                        Save </button>
                </div>
            </div>
        </form>
    </mat-card-content>
</mat-card>