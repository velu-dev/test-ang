<div class="create-claim">
    <!--   -->
    <mat-horizontal-stepper linear (selectionChange)="selectionChange($event)" #stepper class="create-claimant-stepper">
        <mat-step [stepControl]="claimant">
            <form [formGroup]="claimant" (keydown.enter)="$event.target.tagName == 'TEXTAREA'">
                <ng-template matStepLabel><span>{{isEdit ? 'Update' : 'Create'}}</span> Claimant
                </ng-template>
                <div fxLayout="row wrap" fxFlex="100">
                    <mat-card class="m-t-20" fxFlex="100">
                        <div *ngIf="!isEdit" fxLayout="row wrap" fxFlex="100">
                            <mat-tab-group (selectedTabChange)="advanceTabChanged($event)" class="w-100">
                                <mat-tab label="Search Claimants " *ngIf="!isRemoveSearchRemove" class="w-100">
                                    <mat-form-field appearance="fill" fxFlex="100"
                                        hideRequiredMarker="hideRequiredControl.auto"
                                        floatLabel="floatLabelControl.auto" class="advanced_search w-100">
                                        <input matInput id="claimant-input" placeholder="Search by name, date of birth "
                                            [matAutocomplete]="claimantAutocomplete" #trigger="matAutocompleteTrigger"
                                            [formControl]="searchInput" class="p-l-10">
                                        <mat-autocomplete #claimantAutocomplete="matAutocomplete">
                                            <mat-option *ngFor="let option of filteredClaimant?.data"
                                                (click)="selectClaimant(option)">
                                                <span><strong>Full Name:</strong> {{option.first_name}}
                                                    {{option.middle_name}} {{option.last_name}} <strong>DOB:</strong>
                                                    {{option.date_of_birth | date:'MM-dd-yyyy' }}</span>
                                            </mat-option>
                                            <mat-option *ngIf="filteredClaimant?.data.length == 0">No Data
                                                Found</mat-option>
                                        </mat-autocomplete>
                                        <span matSuffix class="search-icon icons">
                                            <mat-icon>search</mat-icon>
                                        </span>
                                    </mat-form-field>
                                </mat-tab>

                                <mat-tab label="Search EAMS" *ngIf="isRemoveSearchRemove || isNewClaim">
                                    <mat-form-field appearance="fill" fxFlex="100"
                                        hideRequiredMarker="hideRequiredControl.auto"
                                        floatLabel="floatLabelControl.auto" class="adj_filter w-100">
                                        <input matInput placeholder="Enter WCAB number (e.g. ADJ11111111)"
                                            (keyup.enter)="searchEAMS()" [formControl]="emasSearchInput"
                                            autocomplete="off" class="p-l-10">
                                        <span matSuffix class="search-icon icons" (click)="searchEAMS()">
                                            <mat-icon>search</mat-icon>
                                        </span>
                                        <mat-error *ngIf="eamsStatus">
                                            <span>Please enter valid WCAB number</span></mat-error>
                                    </mat-form-field>
                                </mat-tab>
                            </mat-tab-group>
                        </div>
                    </mat-card>
                    <mat-card class="m-t-20 m-b-20">
                        <div fxLayout="row wrap" fxFlex="100">
                            <div fxFlex="100" class="m-b-20">
                                <div fxLayout="row wrap" class="w-100">
                                    <div fxFlex="33.3" fxFlex.sm="50" fxFlex.xs="50">
                                        <div class="content-wrapper-main-title p-t-10 m-b-10 p-l-10"> Claimant</div>
                                    </div>
                                    <div fxFlex="33.3" fxFlex.sm="50" fxFlex.xs="50" class="reference_no">
                                        <div class="content-wrapper-main-title p-t-10 m-b-10 text-center"
                                            *ngIf="claimantInfo?.internal_reference"> Ref #:
                                            {{claimantInfo?.internal_reference}}</div>

                                    </div>
                                </div>
                                <mat-divider></mat-divider>
                            </div>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>First Name*</mat-label>
                                <input matInput placeholder="First Name" formControlName="first_name"
                                    autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">{{errorMessages.entervalidfirstname}}</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Middle Name/MI</mat-label>
                                <input matInput placeholder="Middle Name/MI" formControlName="middle_name"
                                    autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">{{errorMessages.entervalidmiddlename}}</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Last Name*</mat-label>
                                <input matInput placeholder="Last Name" formControlName="last_name" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">{{errorMessages.entervalidlastname}}</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Suffix</mat-label>
                                <input matInput placeholder="Suffix" formControlName="suffix" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Alphabets, Periods, Slash and Hyphen are allowed
                                </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Date of Birth*</mat-label>
                                <input matInput placeholder="MM-DD-YYYY" autocomplete="off"
                                    [matDatepicker]="date_of_birth" [min]="minimumDate" [max]="today"
                                    formControlName="date_of_birth">
                                <mat-datepicker-toggle matSuffix [for]="date_of_birth"></mat-datepicker-toggle>
                                <mat-datepicker #date_of_birth disabled="false"></mat-datepicker>
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid date of birth</mat-error>
                            </mat-form-field>

                            <div fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3" fxFlex.sm="50"
                                fxFlex.xs="100"> </div>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Gender</mat-label>
                                <mat-select formControlName="gender">
                                    <mat-option value="M">Male</mat-option>
                                    <mat-option value="F">Female</mat-option>
                                    <mat-option value="U">Unknown</mat-option>
                                </mat-select>
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid gender</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Handedness</mat-label>
                                <mat-select formControlName="handedness">
                                    <mat-option value="R">Right</mat-option>
                                    <mat-option value="L">Left</mat-option>
                                    <mat-option value="A">Ambidextrous</mat-option>
                                </mat-select>
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid handedness</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Social Security Number</mat-label>
                                <input matInput mask="000-00-0000" placeholder="999-99-9999" formControlName="ssn"
                                    autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid SSN</mat-error>
                            </mat-form-field>

                            <div fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3" fxFlex.sm="50"
                                fxFlex.xs="100" class="checkbox">
                                <div class="p-t-30 p-l-10">
                                    <mat-checkbox class="p-l-10"
                                        (change)="languageStatus = !languageStatus;langChange()"
                                        formControlName="certified_interpreter_required" labelposition="after">Certified
                                        Interpreter Required</mat-checkbox>
                                </div>
                            </div>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Language</mat-label>
                                <mat-select formControlName="primary_language_spoken"
                                    (selectionChange)="primryLangChange();claimant.get('other_language').reset()"
                                    [disabled]="!languageStatus">
                                    <mat-option *ngFor="let language of languageList" [value]="language.id">
                                        {{language.language}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="isClaimantSubmited">Please select a language</mat-error>
                            </mat-form-field>

                            <div fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.xl="33.3" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-form-field fxFlex="100" *ngIf="claimant.value.primary_language_spoken == 20"
                                    appearance="outline">
                                    <mat-label>Other Language</mat-label>
                                    <input matInput formControlName="other_language" placeholder="Other Language"
                                        autocomplete="off">
                                    <mat-error *ngIf="isClaimantSubmited">Please enter other language</mat-error>
                                </mat-form-field>
                            </div>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input matInput type="text" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    formControlName="phone_no_1" placeholder="Phone" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Alternate Phone</mat-label>
                                <input matInput (keypress)="numberOnly($event)" type="text" mask="(000) 000-0000"
                                    formControlName="phone_no_2" placeholder="Alternate Phone" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid alternative phone number
                                </mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid email</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.lg="50"
                                fxFlex.xl="50" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1"
                                    placeholder="Street Address 1" formControlName="street1"
                                    autocomplete="off"></textarea>
                                <mat-error>Please enter valid address</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.lg="50"
                                fxFlex.xl="50" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput cdkTextareaAutosize cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1"
                                    placeholder="Street Address 2" formControlName="street2"
                                    autocomplete="off"></textarea>
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid address</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput placeholder="City" formControlName="city" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid city</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state"
                                    (selectionChange)="changeState($event.value, 'claimant')">
                                    <mat-select-trigger>
                                        {{claimantState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.id">{{state.state_code}} -
                                        {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput placeholder="Zip Code" mask="9{10}" [dropSpecialCharacters]="false"
                                    formControlName="zip_code" autocomplete="off">
                                <mat-error *ngIf="isClaimantSubmited">Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <div class="text-center w-100 m-b-10 action-button">

                                <button mat-stroked-button type="button" class="m-r-10 outline-danger"
                                    (click)="cancel('Claimant')">Cancel</button>

                                <button mat-stroked-button type="submit" class="m-r-10 outline-light_green"
                                    (click)="createClaimant('close')">
                                    Save & Close </button>

                                <button mat-stroked-button type="submit" class="m-r-10 outline-success"
                                    (click)="createClaimant('next')">
                                    Save & Next</button>

                            </div>
                        </div>
                    </mat-card>
                </div>
            </form>
        </mat-step>
        <mat-step [stepControl]="claim">
            <form [formGroup]="claim" (keydown.enter)="$event.target.tagName == 'TEXTAREA'" id="claimant">
                <ng-template matStepLabel><span>{{isEdit ? 'Update' : 'Create'}}</span> Claim</ng-template>
                <mat-card class="claimant_info">
                    <mat-card-header class="p-b-10">
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100">Claimant</div>
                        </mat-panel-title>
                    </mat-card-header>
                    <mat-divider></mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="claim_details">
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Name </mat-label>
                                <input matInput type="text" placeholder="Name" formControlName="claimant_name" disabled
                                    [value]="claimantDetails.claimant_name">
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Date of Birth</mat-label>
                                <input matInput placeholder="Date of Birth" autocomplete="off"
                                    [ngModel]="claimantDetails.date_of_birth | date:'MM-dd-yyyy'"
                                    [ngModelOptions]="{standalone: true}"
                                    (ngModelChange)="claimantDetails.date_of_birth = $event" disabled>
                                <mat-error *ngIf="isClaimSubmited">Please enter valid claim number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input type="text" matInput placeholder="Enter Phone" autocomplete="off"
                                    formControlName="phone_no_1" mask="(000) 000-0000">
                                <mat-error *ngIf="isClaimSubmited">Please enter valid WCAB number</mat-error>
                            </mat-form-field>

                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 claim_info">
                    <mat-card-header class="p-b-10">
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100">Claim Information</div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">{{errors?.claim_details != 0 ? 'Please correct the error!' : ""}}
                            </div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider></mat-divider>
                    <mat-card-content>
                        <div fxLayout="row wrap" fxFlex="100" class="m-t-15" formGroupName="claim_details">

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Claim Number</mat-label>
                                <input matInput placeholder="Claim Number" formControlName="claim_number"
                                    autocomplete="off">
                                <mat-error *ngIf="isClaimSubmited">Please enter valid claim number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>WCAB Number</mat-label>
                                <input type="text" matInput placeholder="Enter WCAB Number"
                                    formControlName="wcab_number" autocomplete="off">
                                <mat-error *ngIf="isClaimSubmited">Please enter valid WCAB number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Exam Type*</mat-label>
                                <mat-select formControlName="exam_type_id">
                                    <mat-option *ngFor="let examType of examTypes" (click)="examtypeChange(examType)"
                                        [value]="examType.id">
                                        {{examType.exam_type_code}} - {{examType.exam_name}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="isClaimSubmited">Please select exam type</mat-error>
                            </mat-form-field>


                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Panel Number </mat-label>
                                <input matInput placeholder="Panel Number" formControlName="panel_number"
                                    autocomplete="off">
                                <mat-error *ngIf="isClaimSubmited">Please enter valid Panel number</mat-error>
                            </mat-form-field>

                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 injury_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 p-t-10">Injury Information</div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <button mat-stroked-button class="outline-success float-right m-b-5"
                            (click)="openInjuryDialog()">Add
                            Injury</button>
                    </mat-card-header>
                    <mat-divider></mat-divider>
                    <mat-card-content class="m-t-15 p-b-15">
                        <div fxLayout="row wrap" fxFlex="100">
                            <div class="user-table vertical-fixed default-cursor striped_" fxFlex="100">
                                <table mat-table [dataSource]="dataSource" class="w-100">
                                    <!-- body_parts Column -->
                                    <ng-container matColumnDef="body_part_id">
                                        <th mat-header-cell *matHeaderCellDef class="data-max-width"> Body parts </th>
                                        <td mat-cell *matCellDef="let element"> {{bodyPart(element)}} </td>
                                    </ng-container>

                                    <!-- injury_date Column -->
                                    <ng-container matColumnDef="date_of_injury">
                                        <th mat-header-cell *matHeaderCellDef> Date of injury </th>
                                        <td mat-cell *matCellDef="let element" class="no-wrap-td">
                                            {{element?.date_of_injury | date:'MM-dd-yyyy'}} </td>
                                    </ng-container>

                                    <ng-container matColumnDef="action">
                                        <th mat-header-cell *matHeaderCellDef class="text-center"> Action </th>
                                        <td mat-cell *matCellDef="let element;let i=index"
                                            class="no-wrap-td text-center">
                                            <a class="text-success" (click)="editInjury(element,i)">
                                                Edit
                                            </a>
                                            <a class="text-danger m-l-10" (click)="deleteInjury(element, i)">
                                                Remove
                                            </a>
                                        </td>
                                    </ng-container>

                                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                                <app-nodata *ngIf="dataSource?.filteredData?.length == 0"></app-nodata>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 correspondence_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Communication Documents</div>
                        </mat-panel-title>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content>
                        <div fxLayout="row wrap" fxFlex="100">
                            <div fxLayout="row wrap" fxFlex="100" (keydown.enter)="$event.target.tagName == 'TEXTAREA'"
                                class="correspondence-file-upload">
                                <div fxFlex="100" fxFlex.sm="100" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50"
                                    class="Upload_">
                                    <button type="button" (click)="uploader.click()" mat-stroked-button
                                        class="outline-success">
                                        Select File<i class="fa fa-upload p-l-5"></i></button>
                                    <mat-form-field appearance="standard">
                                        <input matInput [title]="file" readonly [value]="file | ellipsis:50"
                                            placeholder="No file chosen">
                                        <input type="file" #uploader hidden (change)="uploadFile($event)"
                                            id="uploadFile" accept=".pdf, .doc, .docx," required>
                                        <mat-hint>Supported file formats: .pdf, .doc, .docx</mat-hint>
                                        <mat-hint align="end" *ngIf="fileErrors.file.isError">
                                            <mat-error>{{fileErrors.file.error}}</mat-error>
                                        </mat-hint>
                                    </mat-form-field>
                                </div>

                                <mat-form-field fxFlex="100" fxFlex.sm="100" fxFlex.md="30" fxFlex.lg="30"
                                    fxFlex.xl="30" appearance="standard">
                                    <mat-label>Note</mat-label>
                                    <input matInput [(ngModel)]="note" [ngModelOptions]="{standalone: true}"
                                        placeholder="Note">
                                </mat-form-field>
                                <div fxFlex="100" fxFlex.sm="100" fxFlex.md="20" fxFlex.lg="20" fxFlex.xl="20">
                                    <button mat-stroked-button type="button" (click)="correspondFormSubmit();"
                                        class="outline-success p-r-20 m-t-20">Add
                                    </button>
                                </div>
                            </div>
                            <div fxFlex="100" class="m-t-20">
                                <div class="basic-table document_list w-100 vertical-fixed default-cursor">
                                    <table mat-table [dataSource]="correspondenceSource">

                                        <ng-container matColumnDef="doc_image">
                                            <th mat-header-cell *matHeaderCellDef> </th>
                                            <td mat-cell *matCellDef="let element"> <img
                                                    [src]="element?.file_name | fileType" alt="docx"></td>
                                        </ng-container>

                                        <ng-container matColumnDef="doc_name">
                                            <th mat-header-cell *matHeaderCellDef class="data-max-width"> Name</th>
                                            <td mat-cell *matCellDef="let element"> <b
                                                    class="p-t-5">{{element?.file_name}}</b><br />
                                                <small>Note : {{element?.notes}}</small></td>
                                        </ng-container>

                                        <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef> Uploaded On </th>
                                            <td mat-cell *matCellDef="let element" class="no-wrap-td">
                                                {{element?.updatedAt |  date:'MM-dd-yyyy' }} <small class="p-l-10"><span
                                                        class="fa fa-clock-o"></span>
                                                    {{element?.updatedAt |  date:'hh:mm a' }} </small></td>
                                        </ng-container>

                                        <ng-container matColumnDef="action">
                                            <th mat-header-cell *matHeaderCellDef class="text-center"> Action </th>
                                            <td mat-cell *matCellDef="let element" class="text-center no-wrap-td">
                                                <a class="text-success"
                                                    (click)="downloadDoc(element?.exam_report_file_url,element?.file_name )">
                                                    Download
                                                </a>
                                                <a class="text-danger m-l-10" (click)="deletecorrespondence(element)">
                                                    Remove
                                                </a>
                                            </td>
                                        </ng-container>

                                        <tr mat-header-row *matHeaderRowDef="displayedColumns_1; sticky: true"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns_1;"></tr>
                                    </table>
                                    <app-nodata *ngIf="correspondenceSource?.filteredData?.length == 0"></app-nodata>
                                </div>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 claim_admin_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Claims Administrator Information </div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">
                                {{errors?.InsuranceAdjuster != 0 ? 'Please correct the error!' : ""}}</div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="InsuranceAdjuster">
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Insurance Name</mat-label>
                                <input type="text" matInput placeholder="Insurance Name" formControlName="company_name"
                                    [matAutocomplete]="caAuto">
                                <button mat-button *ngIf="claim.value.InsuranceAdjuster.company_name" matSuffix
                                    mat-icon-button aria-label="Clear" (click)="clearAutoComplete('ca')">
                                    <mat-icon>close</mat-icon>
                                </button>
                                <mat-autocomplete #caAuto="matAutocomplete">
                                    <mat-optgroup *ngFor="let group of claimAdminGroupOptions " [label]="group.name">
                                        <mat-option (click)="appClaimAdmin(claim_admin)"
                                            *ngFor="let claim_admin of group.data" [value]="claim_admin.company_name">
                                            {{claim_admin.company_name}}
                                        </mat-option>
                                    </mat-optgroup>
                                </mat-autocomplete>
                                <mat-error>Please enter valid claim administrator</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Adjuster Name</mat-label>
                                <input matInput placeholder="Adjuster Name" formControlName="name" autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput placeholder="Street Address 1" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street1"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput placeholder="Street Address 2" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street2"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput type="text" placeholder="City" formControlName="city"
                                    autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state" (selectionChange)="changeState($event.value, 'ca')">
                                    <mat-select-trigger>
                                        {{caState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.state">{{state.state_code}}
                                        - {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput placeholder="Zip Code" mask="9{10}" [dropSpecialCharacters]="false"
                                    formControlName="zip_code" autocomplete="off">
                                <mat-error>Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Adjuster Phone</mat-label>
                                <input matInput type="text" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    placeholder="Phone" formControlName="phone" autocomplete="off">
                                <mat-error>Please enter valid phone number</mat-error>
                            </mat-form-field>


                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Adjuster Fax</mat-label>
                                <input matInput (keypress)="numberOnly($event)" mask="(000) 000-0000" placeholder="Fax"
                                    formControlName="fax" autocomplete="off">
                                <mat-error>Please enter valid fax number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Adjuster Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" autocomplete="off">
                                <mat-error>Please enter valid email</mat-error>
                            </mat-form-field>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 claim_admin_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Employer Information</div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">{{errors?.Employer != 0 ? 'Please correct the error!' : ""}}
                            </div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="Employer">
                            <mat-form-field *ngIf="employerList.length == 0" appearance="outline" fxFlex="100"
                                fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                                <mat-label>Name</mat-label>
                                <input matInput placeholder="Name" formControlName="name" autocomplete="off">
                            </mat-form-field>
                            <mat-form-field *ngIf="employerList.length != 0" appearance="outline" fxFlex="100"
                                fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                                <mat-label>Employer Name</mat-label>
                                <mat-select formControlName="name">
                                    <mat-option (click)="appEmployer(employer)" *ngFor="let employer of employerList"
                                        [value]="employer.name">
                                        {{employer.name}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid employer name</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput placeholder="Street Address 1" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street1"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput placeholder="Street Address 2" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street2"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput placeholder="City" formControlName="city" autocomplete="off">
                            </mat-form-field>


                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state"
                                    (selectionChange)="changeState($event.value, 'emp')">
                                    <mat-select-trigger>
                                        {{empState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.state">{{state.state_code}}
                                        - {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput placeholder="Zip Code" mask="9{10}" [dropSpecialCharacters]="false"
                                    formControlName="zip_code" autocomplete="off">
                                <mat-error>Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input matInput placeholder="Phone" type="text" (keypress)="numberOnly($event)"
                                    mask="(000) 000-0000" formControlName="phone" autocomplete="off">
                                <mat-error>Please enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Fax</mat-label>
                                <input matInput (keypress)="numberOnly($event)" mask="(000) 000-0000" placeholder="Fax"
                                    formControlName="fax" autocomplete="off">
                                <mat-error>Please enter valid fax number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Email</mat-label>
                                <input matInput type="text" placeholder="Email" formControlName="email"
                                    autocomplete="off">
                                <mat-error>Please enter valid email</mat-error>
                            </mat-form-field>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 app_attorney_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Applicant Attorney Information </div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">
                                {{errors?.ApplicantAttorney != 0 ? 'Please correct the error!' : ""}}</div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="ApplicantAttorney">
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Law Firm Name</mat-label>
                                <input type="text" matInput placeholder="Law Firm Name" formControlName="company_name"
                                    [matAutocomplete]="aaAuto">
                                <button mat-button *ngIf="claim.value.ApplicantAttorney.company_name" matSuffix
                                    mat-icon-button aria-label="Clear" (click)="clearAutoComplete('aa')">
                                    <mat-icon>close</mat-icon>
                                </button>
                                <mat-autocomplete #aaAuto="matAutocomplete">
                                    <mat-optgroup *ngFor="let group of aattroneyGroupOptions" [label]="group.name">
                                        <!-- [disabled]="selectedDAttorney == aa.id" -->
                                        <mat-option (click)="appAttorney(aa)" *ngFor="let aa of group.data"
                                            [value]="aa.company_name">
                                            {{aa.company_name}}
                                        </mat-option>
                                    </mat-optgroup>
                                </mat-autocomplete>
                                <mat-error>Please enter valid attroney</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Attorney Name</mat-label>
                                <input matInput formControlName="name" placeholder="Attorney Name" autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput placeholder="Street Address 1" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street1"></textarea>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput placeholder="Street Address 2" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street2"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput placeholder="City" formControlName="city" autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state" (selectionChange)="changeState($event.value, 'aa')">
                                    <mat-select-trigger>
                                        {{aaState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.state">{{state.state_code}}
                                        - {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput placeholder="Zip Code" mask="9{10}" [dropSpecialCharacters]="false"
                                    formControlName="zip_code" autocomplete="off">
                                <mat-error>Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input matInput type="text" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    placeholder="Phone" formControlName="phone" autocomplete="off">
                                <mat-error>Please enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Fax</mat-label>
                                <input matInput placeholder="Fax" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    formControlName="fax" autocomplete="off">
                                <mat-error>Please enter valid fax number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" autocomplete="off">
                                <mat-error>Please enter valid email</mat-error>
                            </mat-form-field>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 def_attorney_info">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Defense Attorney Information </div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">
                                {{errors?.DefenseAttorney != 0 ? 'Please correct the error!' : ""}}</div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="DefenseAttorney">
                            <mat-form-field *ngIf="DattroneySelect" appearance="outline" fxFlex="50" fxFlex.md="50"
                                fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Law Firm Name</mat-label>
                                <input type="text" matInput placeholder="Law Firm Name" formControlName="company_name"
                                    [matAutocomplete]="daAuto">
                                <button mat-button *ngIf="claim.value.DefenseAttorney.company_name" matSuffix
                                    mat-icon-button aria-label="Clear" (click)="clearAutoComplete('da')">
                                    <mat-icon>close</mat-icon>
                                </button>
                                <mat-autocomplete #daAuto="matAutocomplete">
                                    <mat-optgroup *ngFor="let group of dattroneyGroupOptions" [label]="group.name">
                                        <!-- [disabled]="selectedAAttorney == aa.id" -->
                                        <mat-option (click)="defAttornety(aa)" *ngFor="let aa of group.data"
                                            [value]="aa.company_name">
                                            {{aa.company_name}}
                                        </mat-option>
                                    </mat-optgroup>
                                </mat-autocomplete>
                                <mat-error>Please enter valid attroney</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Attorney Name</mat-label>
                                <input matInput formControlName="name" placeholder="Attorney Name" autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput placeholder="Street Address 1" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street1"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput placeholder="Street Address 2" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street2"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput placeholder="City" formControlName="city" autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state" (selectionChange)="changeState($event.value, 'da')">
                                    <mat-select-trigger>
                                        {{daState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.state">{{state.state_code}}
                                        - {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid state</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput placeholder="Zip Code" mask="9{10}" [dropSpecialCharacters]="false"
                                    formControlName="zip_code" autocomplete="off">
                                <mat-error>Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input matInput type="text" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    placeholder="Phone" formControlName="phone" autocomplete="off">
                                <mat-error>Please enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Fax</mat-label>
                                <input matInput placeholder="Fax" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    formControlName="fax" autocomplete="off">
                                <mat-error>Please enter valid fax number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" autocomplete="off">
                                <mat-error>Please enter valid email</mat-error>
                            </mat-form-field>
                            <div *ngIf="claim.get(['claim_details', 'exam_type_id']).value == 3"
                                class="text-center w-100 m-t-10 m-b-10 action-button" fxFlex="100">
                                <button mat-stroked-button type="button" class="m-r-10 outline-warning"
                                    matStepperPrevious>Previous</button>
                                <button mat-stroked-button type="button" class="m-r-10 outline-danger"
                                    (click)="cancel('Claim')">Cancel</button>
                                <button mat-stroked-button type="submit" class="m-r-10 outline-light_green"
                                    (click)="submitClaim('save')">
                                    Save & Close</button>
                                <button mat-stroked-button type="submit" class="m-r-10 outline-success"
                                    (click)="submitClaim('next')">Save & Next
                                </button>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
                <mat-card class="m-t-20 m-b-20 def_attorney_info"
                    *ngIf="claim.get(['claim_details', 'exam_type_id']).value != 3">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">DEU Office </div>
                        </mat-panel-title>
                        <span class="spacer"></span>
                        <mat-panel-description class="mat-error">
                            <!-- <div class="alert">{{errors?.DEU != 0 ? 'Please correct the error!' : ""}}</div> -->
                        </mat-panel-description>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="DEU">
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="100" fxFlex.sm="100"
                                fxFlex.xs="100">
                                <mat-label>Office Name</mat-label>
                                <input matInput placeholder="Please Select Office Name" aria-label="Office Name"
                                    [matAutocomplete]="deuAuto" [formControl]="deuCtrl">
                                <mat-autocomplete #deuAuto="matAutocomplete">
                                    <mat-option *ngFor="let deu of (filteredDeu | async)" (click)="deuSelect(deu)"
                                        [value]="deu.deu_office">
                                        <span>{{deu.code}} - {{deu.deu_office}}</span>
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 1</mat-label>
                                <textarea matInput placeholder="Street Address 1" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street1"></textarea>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Street Address 2</mat-label>
                                <textarea matInput placeholder="Street Address 2" cdkTextareaAutosize
                                    cdkAutosizeMinRows="1" cdkAutosizeMaxRows="1" formControlName="street2"></textarea>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput type="text" placeholder="City" formControlName="city"
                                    autocomplete="off">
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state"
                                    (selectionChange)="changeState($event.value, 'deu')">
                                    <mat-select-trigger>
                                        {{deuState}}
                                    </mat-select-trigger>
                                    <mat-option *ngFor="let state of states" [value]="state.state">
                                        {{state.state_code}}
                                        - {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error>Please enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip Code</mat-label>
                                <input matInput mask="9{10}" [dropSpecialCharacters]="false" formControlName="zip_code"
                                    placeholder="Zip Code" autocomplete="off">
                                <mat-error>Please enter valid zip code</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input matInput type="text" (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                    placeholder="Phone" formControlName="phone" autocomplete="off">
                                <mat-error>Please enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Fax</mat-label>
                                <input matInput placeholder="Fax" (keypress)="numberOnly($event)" formControlName="fax"
                                    mask="(000) 000-0000" autocomplete="off">
                                <mat-error>Please enter valid fax number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" autocomplete="off">
                                <mat-error>Please enter valid email</mat-error>
                            </mat-form-field>
                            <div class="text-center w-100 m-t-10 m-b-10 action-button" fxFlex="100">
                                <button mat-stroked-button type="button" class="m-r-10 outline-warning"
                                    matStepperPrevious>Previous</button>
                                <button mat-stroked-button type="button" class="m-r-10 outline-danger"
                                    (click)="cancel('Claim')">Cancel</button>
                                <button mat-stroked-button type="submit" class="m-r-10 outline-light_green"
                                    (click)="submitClaim('save')">
                                    Save & Close</button>
                                <button mat-stroked-button type="submit" class="m-r-10 outline-success"
                                    (click)="submitClaim('next')">Save & Next
                                </button>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </form>
        </mat-step>
        <mat-step [stepControl]="billable_item">
            <form [formGroup]="billable_item" (keydown.enter)="$event.target.tagName == 'TEXTAREA'">
                <ng-template matStepLabel><span>{{isEdit ? 'Update' : 'Create'}}</span> Billable Item</ng-template>

                <mat-card class="m-t-20 m-b-20">
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Claimant & Claim</div>
                        </mat-panel-title>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content class="m-t-15">
                        <div fxLayout="row wrap" fxFlex="100" formGroupName="claim_details">
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Name </mat-label>
                                <input matInput type="text" placeholder="Name" [value]="claimantDetails.claimant_name"
                                    disabled>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Date of Birth</mat-label>
                                <input matInput name="date_of_birth" placeholder="Date of Birth"
                                    [ngModel]="claimantDetails.date_of_birth | date:'MM-dd-yyyy'"
                                    [ngModelOptions]="{standalone: true}"
                                    (ngModelChange)="claimantDetails.date_of_birth = $event" disabled>
                                <mat-error>Please enter valid claim number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Phone</mat-label>
                                <input type="text" matInput placeholder="Enter Phone" formControlName="phone_no_1"
                                    mask="(000) 000-0000" disabled>
                                <mat-error>Please enter valid WCAB number</mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Claim Number</mat-label>
                                <input matInput placeholder="Claim Number" [value]="claimDetails.claim_number"
                                    autocomplete="off" disabled>
                                <mat-error>Please enter valid claim number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>WCAB Number</mat-label>
                                <input type="text" matInput placeholder="Enter WCAB Number" autocomplete="off"
                                    [value]="claimDetails.wcab_number" disabled>
                                <mat-error>Please enter valid WCAB number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3"
                                fxFlex.xl="33.3" fxFlex.sm="50" fxFlex.xs="100">
                                <mat-label>Exam Type*</mat-label>
                                <input type="text" matInput placeholder="Enter WCAB Number" autocomplete="off"
                                    [value]="claimDetails.exam_type_id" disabled>
                                <mat-error>Please select exam type</mat-error>
                            </mat-form-field>

                        </div>
                    </mat-card-content>
                </mat-card>

                <mat-card>
                    <mat-card-header>
                        <mat-panel-title>
                            <div class="sub-title p-l-10 w-100 p-t-10 p-b-10">Billable Item</div>
                        </mat-panel-title>
                    </mat-card-header>
                    <mat-divider> </mat-divider>
                    <mat-card-content>
                        <div fxLayout="row wrap" fxFlex="100" class="p-t-15">
                            <div fxLayout="row wrap" fxFlex="100" formGroupName="exam_type">
                                <mat-form-field appearance="outline" fxFlex="100" fxFlex.md="100" fxFlex.sm="100"
                                    fxFlex.xs="100">
                                    <mat-label>Exam Procedure Type*</mat-label>
                                    <mat-select formControlName="exam_procedure_type_id"
                                        (selectionChange)="examTypeChange($event.value)">
                                        <mat-option *ngFor="let procuderalCode of procuderalCodes"
                                            [value]="procuderalCode.exam_procedure_type_id"
                                            (click)="procedure_type(procuderalCode)">
                                            {{procuderalCode.exam_procedure_name}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="isBillSubmited">Please select Exam Procedure Type</mat-error>
                                </mat-form-field>

                                <!-- <div fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                                    <div fxLayout="row wrap">
                                        <mat-form-field appearance="outline" fxFlex="100">
                                            <mat-label>Modifiers</mat-label>
                                            <mat-select formControlName="modifier_id" multiple
                                                (selectionChange)="modifyChange()">
                                                <mat-option *ngFor="let modifier of modifiers" [value]="modifier.id">
                                                    {{modifier.modifier_code}} - {{modifier.modifier}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-hint *ngIf="billable_item.value.exam_type?.modifier_id?.includes(2)">
                                                <span *ngIf="!primary_language_spoken">Note: No language selected.
                                                    Please
                                                    select
                                                    it from Claimant's section!</span>

                                            </mat-hint>
                                        </mat-form-field>
                                        <div fxFlex="100"
                                            *ngIf="billable_item.value.exam_type?.modifier_id?.includes(2)">
                                            <div class="selected_lang" *ngIf="primary_language_spoken">
                                                {{selectedLanguage?.language}}</div>
                                        </div>
                                    </div>

                                </div> -->
                            </div>
                            <div fxLayout="row wrap" fxFlex="100" formGroupName="appointment">
                                <!-- <div fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                                    <mat-checkbox [(ngModel)]="isChecked" [ngModelOptions]="{standalone: true}"
                                        class="mat-check m-b-20" (change)="psychiatric($event)" labelPosition="after">
                                        Psych
                                    </mat-checkbox>
                                </div> -->
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Examiner*</mat-label>
                                    <mat-select formControlName="examiner_id">
                                        <mat-option *ngFor="let examinar of examinarList"
                                            (click)="examinarChange(examinar)" [value]="examinar.id">
                                            {{examinar.first_name}} {{examinar.middle_name}} {{examinar.last_name}}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error *ngIf="isBillSubmited">Please select Examiner</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="25" fxFlex.md="25" fxFlex.sm="25"
                                    fxFlex.xs="100" *ngIf="!isSuplimental">
                                    <mat-label>Date & Time</mat-label>
                                    <input matInput placeholder="MM-DD-YYYY HH:MM AM/PM" [min]="todayDate.appointment"
                                        formControlName="appointment_scheduled_date_time" autocomplete="off"
                                        [owlDateTime]="appointment"
                                        [value]="changeDateType(billable_item?.value?.appointment?.appointment_scheduled_date_time)">
                                    <mat-datepicker-toggle matSuffix [owlDateTimeTrigger]="appointment">
                                    </mat-datepicker-toggle>
                                    <owl-date-time (afterPickerOpen)="pickerOpened('app')" [hour12Timer]="true"
                                        #appointment>
                                    </owl-date-time>
                                    <mat-error>Please enter valid date & time</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="25" fxFlex.md="25" fxFlex.sm="25"
                                    fxFlex.xs="100" *ngIf="!isSuplimental">
                                    <mat-label>Duration</mat-label>
                                    <input matInput type="number" placeholder="Minutes" min="1" max="450" maxlength="3"
                                        formControlName="duration" autocomplete="off">
                                    <span matSuffix>Minutes</span>
                                    <mat-error>Please enter a valid duration between 1 to 450 minutes</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100" *ngIf="!isSuplimental">
                                    <mat-label>Location</mat-label>
                                    <mat-select (selectionChange)="serviceLocationChange($event.value)">
                                        <mat-select-trigger>
                                            {{service_lcation_name == '0' ? "Virtual Service Location" : service_lcation_name }}
                                        </mat-select-trigger>
                                        <mat-option (click)="VserviceLocation()" value="0">
                                            Virtual Service Location
                                        </mat-option>
                                        <mat-option *ngFor="let address of (examinarAddress | async)"
                                            (click)="changeExaminarAddress(address)"
                                            [value]="address.service_location_name">
                                            {{address.service_location_name}} - {{address.street1}} {{address.street2}}
                                            {{address.city}}
                                            {{address.state_code}}
                                            {{address.zip_code+(address.zip_code_plus_4 != null ? "-"+address.zip_code_plus_4 : "")}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <div fxFlex="100" fxFlex.md="50" fxFlex.lg="50" fxFlex.xl="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                </div>
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100" *ngIf="billable_item?.value?.appointment?.is_virtual_location">
                                    <mat-label>Conference URL</mat-label>
                                    <input matInput placeholder="To be provided by the scheduling party"
                                        formControlName="conference_url" autocomplete="off">
                                    <mat-error>Please enter a valid Conference URL</mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100" *ngIf="billable_item?.value?.appointment?.is_virtual_location">
                                    <mat-label>Conference Phone</mat-label>
                                    <input matInput (keypress)="numberOnly($event)" mask="(000) 000-0000"
                                        placeholder="To be provided by the scheduling party"
                                        formControlName="conference_phone" autocomplete="off">
                                    <mat-error>Please enter a valid Conference Phone</mat-error>
                                </mat-form-field>
                            </div>
                            <div fxLayout="row wrap" fxFlex="100" formGroupName="intake_call">
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Contact</mat-label>
                                    <input matInput placeholder="Intake Contact" formControlName="caller_name"
                                        autocomplete="off">
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Contact Affiliation</mat-label>
                                    <mat-select formControlName="caller_affiliation">
                                        <mat-option *ngFor="let caller of callerAffliation" [value]="caller.id">
                                            {{caller.agent_type_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Date</mat-label>
                                    <!-- <input matInput placeholder="MM-DD-YYYY HH:MM AM/PM" formControlName="call_date"
                                        autocomplete="off" [min]="minDate" [max]="todayDate.intake"
                                        [owlDateTime]="intake"
                                        [value]="changeDateType(billable_item?.value?.intake_call?.call_date)">
                                    <mat-datepicker-toggle matSuffix [owlDateTimeTrigger]="intake">
                                    </mat-datepicker-toggle>
                                    <owl-date-time (afterPickerOpen)="pickerOpened('intake')" [hour12Timer]="true"
                                        #intake>
                                    </owl-date-time>
                                    <mat-error>Please enter valid date & time</mat-error> -->
                                    <input matInput placeholder="MM-DD-YYYY" autocomplete="off" [matDatepicker]="call_date"
                                    [min]="minDate" [max]="todayDate.intake" formControlName="call_date">
                                <mat-datepicker-toggle matSuffix [for]="call_date"></mat-datepicker-toggle>
                                <mat-datepicker #call_date disabled="false"></mat-datepicker>
                                <mat-error>Please enter valid date</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Communication Type</mat-label>
                                    <mat-select formControlName="call_type">
                                        <mat-option *ngFor="let contactType of contactTypes" [value]="contactType.id">
                                            {{contactType.display_name}}</mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Contact Phone</mat-label>
                                    <input matInput placeholder="Intake Contact Phone" formControlName="caller_phone"
                                        (keypress)="numberOnly($event)" mask="(000) 000-0000" autocomplete="off">
                                    <mat-error *ngIf="isBillSubmited">Please enter valid phone</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Contact Fax</mat-label>
                                    <input matInput placeholder="Intake Contact Fax" formControlName="caller_fax"
                                        autocomplete="off" (keypress)="numberOnly($event)" mask="(000) 000-0000">
                                    <mat-error *ngIf="isBillSubmited">Please enter valid fax</mat-error>
                                </mat-form-field>

                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Contact Email</mat-label>
                                    <input matInput placeholder="Intake Contact Email" formControlName="caller_email"
                                        autocomplete="off">
                                    <mat-error *ngIf="isBillSubmited">Please enter valid email</mat-error>
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                    fxFlex.xs="100">
                                    <mat-label>Intake Notes</mat-label>
                                    <input matInput placeholder="Intake Notes" formControlName="notes"
                                        autocomplete="off">
                                </mat-form-field>
                            </div>
                            <div class="text-center w-100 m-t-10 m-b-10 action-button">
                                <button mat-stroked-button type="button" class="m-r-10 outline-warning"
                                    matStepperPrevious>Previous</button>
                                <button mat-stroked-button type="button" class="m-r-10 outline-danger"
                                    (click)="cancel('Billable Item')">Cancel</button>
                                <button mat-stroked-button class="m-r-10 outline-light_green"
                                    (click)="submitBillableItem('close')">
                                    Save & Close </button>
                                <button mat-stroked-button type="submit" class="m-r-10 outline-success"
                                    (click)="submitBillableItem('next')">
                                    Save & Next</button>
                            </div>
                        </div>
                    </mat-card-content>
                </mat-card>
            </form>
        </mat-step>
    </mat-horizontal-stepper>
</div>