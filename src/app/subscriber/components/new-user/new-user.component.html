<mat-card class="m-card">
    <mat-card-header>
        <mat-card-title class="m-0">User Information</mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
        <!--Form start-->
        <form fxLayout="row wrap" [formGroup]="userForm" class="mat-grid-form">
            <mat-form-field appearance="standard" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.sm="50"
                fxFlex.xs="100">
                <mat-label>First name*</mat-label>
                <input matInput placeholder="First name" formControlName="first_name" autocomplete="off">
                <mat-error *ngIf="isSubmitted">{{errorMessages?.entervalidfirstname}}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="standard" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.sm="50"
                fxFlex.xs="100">
                <mat-label>Middle name / MI</mat-label>
                <input matInput placeholder="Middle name" formControlName="middle_name" autocomplete="off">
                <mat-error *ngIf="isSubmitted">{{errorMessages?.entervalidmiddlename}}</mat-error>
            </mat-form-field>

            <mat-form-field appearance="standard" fxFlex="100" fxFlex.md="33.3" fxFlex.lg="33.3" fxFlex.sm="50"
                fxFlex.xs="100">
                <mat-label>Last name*</mat-label>
                <input matInput placeholder="Last name" formControlName="last_name" autocomplete="off">
                <mat-error *ngIf="isSubmitted">{{errorMessages?.entervalidlastname}}</mat-error>
            </mat-form-field>


            <mat-form-field appearance="standard" fxFlex="100" fxFlex.md="100" fxFlex.sm="100" fxFlex.xs="100">
                <mat-label>Company name</mat-label>
                <input matInput placeholder="Company name" formControlName="company_name" autocomplete="off">
                <mat-error *ngIf="isSubmitted">{{errorMessages?.entervalidcompanyname}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Email ID*</mat-label>
                <input matInput placeholder="Email ID" formControlName="sign_in_email_id">
                <mat-error>{{errorMessages?.entervalidemail}}</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50" fxFlex.xs="100">
                <mat-label>Select a Role</mat-label>
                <mat-select formControlName="role_id">
                    <mat-option *ngFor="let role of roles" [value]="role.id">{{role.role_name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="isSubmitted">{{errorMessages?.selectrole}}</mat-error>
            </mat-form-field>
           
        </form>
    </mat-card-content>
    <div >
        <mat-card *ngIf="userForm.value.role_id == 11" class=" m-card edit-profile m-t-10 " style="min-height:auto !important">
            <mat-card-header>
                <div class="m-0 content-wrapper-main-title">Use Existing or Add New Address</div>
            </mat-card-header>
            <mat-divider></mat-divider>
            <mat-card-content class="multiple-address">
                <div class="search-container p-t-10">
                    <div fxLayout="row wrap">
                        <mat-form-field appearance="fill" fxFlex="100" hideRequiredMarker="hideRequiredControl.auto"
                            floatLabel="floatLabelControl.auto" class="advanced_search w-100">
                            <div matPrefix (click)="advancedSearch = !advancedSearch ">
                                <span>Advanced Search</span>
                                <mat-icon class="expand-icon icons">
                                    {{!advancedSearch ? 'keyboard_arrow_down' : 'keyboard_arrow_up'}}
                                </mat-icon>
                            </div>
                            <input matInput placeholder="Search Existing Address"
                                [matAutocomplete]="claimantAutocomplete" [formControl]="myControl">
                            <mat-autocomplete #claimantAutocomplete="matAutocomplete">
                                <mat-option *ngFor="let option of filteredStates" [value]="option.first_name">
                                    {{option.first_name}}
                                </mat-option>
                            </mat-autocomplete>
                            <span matSuffix class="search-icon icons">
                                <mat-icon>search</mat-icon>
                            </span>
                        </mat-form-field>

                        <form class="w-100">
                            <div class="advance_search" *ngIf="advancedSearch">
                                <div fxLayout="row wrap" fxFlex="100">
                                    <div class="sub-title p-t-15  p-l-10" fxFlex="100">Advanced Search</div>

                                    <mat-form-field appearance="outline" fxFlex="33.3" fxFlex.md="33.3" fxFlex.sm="50"
                                        fxFlex.xs="100">
                                        <mat-label>City</mat-label>
                                        <input matInput placeholder="City" autocomplete="off">
                                        <mat-error>error msg here</mat-error>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="33.3" fxFlex.sm="50"
                                        fxFlex.lg="33.3" fxFlex.xs="100">
                                        <mat-label>State</mat-label>
                                        <input matInput placeholder="State" autocomplete="off">
                                        <mat-error>Enter valid city</mat-error>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" fxFlex="50" fxFlex.md="33.3" fxFlex.sm="50"
                                        fxFlex.lg="33.3" fxFlex.xs="100">
                                        <mat-label>ZIP Code</mat-label>
                                        <input matInput placeholder="ZIP Code" autocomplete="off">
                                        <mat-error>Enter valid city</mat-error>
                                    </mat-form-field>

                                    <div class="text-right w-100 m-t-10 m-b-10">
                                        <button mat-raised-button color="warn" type="button" class="m-r-10 "
                                            (click)="advanceSearch.reset();searchStatus = false">
                                            Cancel </button>
                                        <button mat-raised-button type="button" color="primary"
                                            class="m-r-15 btn_success" (click)="advanceSearchSubmit()">Search</button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                    <div class="manage-btn" (click)="addAddress = !addAddress;addressForm.reset()"> <span
                            class="fa fa-plus"></span> ADD A NEW
                        ADDRESS
                    </div>
                </div>

                <div class="manage-address-form" *ngIf="addAddress">
                    <form [formGroup]="addressForm">
                        <div fxLayout="row wrap" fxFlex="100">
                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Service Location Type</mat-label>
                                <mat-select formControlName="address_type_id">
                                    <mat-option *ngFor="let address of addressType" [value]="address.id">
                                        {{address.address_type_name}}</mat-option>
                                </mat-select>
                                <mat-error *ngIf="addressIsSubmitted">Select valid service location type
                                </mat-error>
                            </mat-form-field>
                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Phone Number</mat-label>
                                <input matInput formControlName="phone" mask="(000) 000-0000" placeholder="Phone Number"
                                    autocomplete="off">
                                <mat-error *ngIf="addressIsSubmitted">Enter valid phone number</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Address </mat-label>
                                <textarea matInput formControlName="street1" placeholder="Address"></textarea>
                                <mat-error *ngIf="addressIsSubmitted">Enter valid address</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Address 1</mat-label>
                                <textarea matInput formControlName="street2" placeholder="Address"></textarea>
                            </mat-form-field>

                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>City</mat-label>
                                <input matInput formControlName="city" placeholder="City" autocomplete="off">
                                <mat-error *ngIf="addressIsSubmitted">Enter valid city</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>State</mat-label>
                                <mat-select formControlName="state">
                                    <mat-option *ngFor="let state of states" [value]="state.state">
                                        {{state.state}}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="addressIsSubmitted">Enter valid state</mat-error>
                            </mat-form-field>

                            <mat-form-field appearance="standard" fxFlex="50" fxFlex.md="50" fxFlex.sm="50"
                                fxFlex.xs="100">
                                <mat-label>Zip code</mat-label>
                                <input matInput formControlName="zipcode" placeholder="Zip code" autocomplete="off">
                                <mat-error *ngIf="addressIsSubmitted">Enter valid zip code</mat-error>
                            </mat-form-field>

                            <div class="text-center w-100 m-t-10 m-b-10">
                                <button mat-raised-button color="warn" class="m-r-10 "
                                    (click)="addressForm.reset();addAddress = false">
                                    Cancel </button>
                                <button mat-raised-button (click)="addressformSubmit()" color="primary"
                                    class="m-r-15 btn_success">Add</button>
                            </div>
                        </div>
                    </form>
                </div>
            </mat-card-content>
        </mat-card>
        <mat-card class="multiple_locations m-t-25">
            <mat-card-content>
                <div class="manage-address">
                    <mat-card class="address-list" *ngIf="addressList?.Primary.length != 0">
                        <mat-card-header>
                            <div class="label m-r-2">Primary</div>
                            <div class="spacer"></div>

                        </mat-card-header>
                        <mat-divider></mat-divider>
                        <mat-card-content>
                            <mat-list>
                                <mat-list-item>
                                    <div class="name" mat-line>
                                        <div><strong>
                                                <i class="fa fa-building-o"></i>{{addressList?.Primary[0]?.city}}
                                            </strong></div>
                                        <span><i class="fa fa-phone-alt"></i>
                                            {{addressList?.Primary[0]?.phone}}</span>
                                    </div>
                                    <div class="address" mat-line> {{addressList?.Primary[0]?.street1 }}
                                        {{addressList?.Primary[0]?.street2 }} {{addressList?.Primary[0]?.city}}
                                        {{addressList?.Primary[0]?.state }}
                                        {{addressList?.Primary[0]?.zipcode }} </div>
                                    <span class="spacer"></span>
                                    <button mat-icon-button class="edit" matTooltip="Edit"
                                        matTooltipPosition="before" (click)="editAddress(addressList?.Primary[0])">
                                        <mat-icon>edit</mat-icon>
                                    </button>
                                    <button mat-icon-button color="warn" matTooltip="Delete"
                                        matTooltipPosition="after"  (click)="deleteAddress(addressList?.Primary[0]?.id)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </mat-list-item>
                            </mat-list>
                        </mat-card-content>
                    </mat-card>

                    <mat-tab-group class="w-100 m-t-20 tab-background-color">
                        <mat-tab>
                            <ng-template mat-tab-label>
                                <mat-icon class="p-r-5">my_location</mat-icon>
                                Service Locations
                            </ng-template>
                            <div class="service_locations">
                                <mat-form-field appearance="standard" class="w-100 p-t-5">
                                    <mat-label>Search Location</mat-label>
                                    <input matInput [(ngModel)]="serviceSearch">
                                </mat-form-field>
                                <mat-list>
                                    <mat-list-item *ngFor="let Service of addressList?.Service | filter:serviceSearch">
                                        <div class="name" mat-line>
                                            <div><strong>
                                                    <i class="fa fa-building-o"></i>{{Service.city}}
                                                </strong></div>
                                            <span><i class="fa fa-phone-alt"></i>
                                                {{Service?.phone}}</span>
                                        </div>
                                        <div class="address" mat-line> {{Service?.street1 }}
                                            {{Service?.street2 }} {{Service?.city}}
                                            {{Service?.state }} {{Service?.zipcode }} </div>
                                        <span class="spacer"></span>
                                        <button mat-icon-button class="edit" matTooltip="Edit"
                                            matTooltipPosition="before" (click)="editAddress(Service)">
                                            <mat-icon>edit</mat-icon>
                                        </button>
                                        <button mat-icon-button color="warn" matTooltip="Delete"
                                            matTooltipPosition="after" (click)="deleteAddress(Service.id)">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                        <mat-divider></mat-divider>
                                    </mat-list-item>
                                </mat-list>
                            </div>
                            <app-nodata
                                *ngIf="addressList?.Service?.length == 0 || (addressList?.Service | filter:serviceSearch)?.length == 0">
                            </app-nodata>
                        </mat-tab>

                        <mat-tab>
                            <ng-template mat-tab-label>
                                <mat-icon class="p-r-5">place</mat-icon>
                                Billing Locations
                            </ng-template>
                            <div class="service_locations">
                                <mat-form-field appearance="standard" class="w-100 p-t-5">
                                    <mat-label>Search Location</mat-label>
                                    <input matInput [(ngModel)]="billingSearch">
                                </mat-form-field>
                                <mat-list>
                                    <mat-list-item *ngFor="let Billing of addressList?.Billing | filter:billingSearch">
                                        <div class="name" mat-line>
                                            <div><strong>
                                                    <i class="fa fa-building-o"></i>{{Billing?.city}}
                                                </strong></div>
                                            <span><i class="fa fa-phone-alt"></i>
                                                {{Billing?.phone }}</span>
                                        </div>
                                        <div class="address" mat-line> {{Billing?.street1 }}
                                            {{Billing?.street2 }} {{Billing?.city}}
                                            {{Billing?.state }} {{Billing?.zipcode }} </div>
                                        <span class="spacer"></span>
                                        <button mat-icon-button class="edit" matTooltip="Edit"
                                            matTooltipPosition="before" (click)="editAddress(Billing)">
                                            <mat-icon>edit</mat-icon>
                                        </button>
                                        <button mat-icon-button color="warn" matTooltip="Delete"
                                            matTooltipPosition="after" (click)="deleteAddress(Billing.id)">
                                            <mat-icon>delete</mat-icon>
                                        </button>
                                        <mat-divider></mat-divider>
                                    </mat-list-item>
                                </mat-list>
                            </div>
                            <app-nodata
                                *ngIf="addressList?.Billing?.length == 0 || (addressList?.Billing | filter:billingSearch)?.length == 0">
                            </app-nodata>
                        </mat-tab>
                    </mat-tab-group>
                </div>
            </mat-card-content>
        </mat-card>

    </div>
    <div class="text-center w-100 m-t-10">
        <button mat-raised-button class="m-r-10 rounded-corner btn_success" (click)="userSubmit()">
            Submit </button>
        <button mat-raised-button type="button" (click)="cancel()" color="warn"
            class="rounded-corner">Cancel</button>
    </div>
</mat-card>